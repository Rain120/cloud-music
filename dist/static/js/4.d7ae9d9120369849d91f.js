webpackJsonp([4],{"3t6g":function(t,s){},"8JGL":function(t,s){},"W1+L":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("Dd8w"),n=i.n(e),a=i("qdB1"),o=i("3Q4o"),r={props:{loop:{type:Boolean,default:!0},autoPlay:{type:Boolean,default:!0},interval:{type:Number,default:4e3}},data:function(){return{dots:[],currentPageIndex:0}},mounted:function(){var t=this;setTimeout(function(){t._setSliderWidth(),t._initScroll(),t._initDots(),t.autoPlay&&t._play()},20)},activated:function(){var t=this;this.slider.enable();var s=this.slider.getCurrentPage().pageX;this.currentPageIndex=s,this.slider.goToPage(s,0,400),this.autoPlay&&this._play(),window.addEventListener("resize",function(){t.slider&&t.slider.enabled&&(t.resizeTimer=setTimeout(function(){t.slider.isInTransition?t._changePageIndex():t.autoPlay&&t._play(),t.refreshSlider()},60))})},methods:{refreshSlider:function(){this._setSliderWidth(!0),this.slider.refresh()},_setSliderWidth:function(t){this.children=this.$refs.sliderGroup.children;for(var s=0,i=this.$refs.slider.clientWidth,e=0;e<this.children.length;e++){var n=this.children[e];Object(o.a)(n,"slider-item"),s+=i,n.style.width=i+"px",n.style.height=.5*i+"px"}this.loop&&!t&&(s+=2*i),this.$refs.sliderGroup.style.width=s+"px"},_initScroll:function(){this.slider=new a.a(this.$refs.slider,{scrollX:!0,scrollY:!1,momentum:!1,snap:{loop:this.loop,threshold:.3,speed:400}}),this.slider.on("scrollEnd",this._changePageIndex)},_initDots:function(){this.dots=new Array(this.children.length-2)},_changePageIndex:function(){this.currentPageIndex=this.slider.getCurrentPage().pageX,this.autoPlay&&this._play()},_play:function(){var t=this;clearTimeout(this.timer),this.autoPlay&&(this.timer=setTimeout(function(){t.slider.next()},this.interval))}},deactivated:function(){this.slider.disable(),clearTimeout(this.timer)},destroyed:function(){this.slider.disable(),clearTimeout(this.timer)}},c={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"slider",staticClass:"slider"},[i("div",{ref:"sliderGroup",staticClass:"slider-group"},[t._t("default")],2),t._v(" "),i("div",{staticClass:"dots"},t._l(t.dots,function(s,e){return i("span",{key:e,staticClass:"dot",class:{active:t.currentPageIndex===e}})}))])},staticRenderFns:[]};var l=i("VU/8")(r,c,!1,function(t){i("3t6g")},"data-v-2997c44f",null).exports,d=i("qwAB"),u=i("y/jF"),m=i("9rMa"),h=i("F4+m"),v=i("Foau"),p=i("W/7t"),f={mixins:[h.a],data:function(){return{banners:[],recommendMusicLists:[],recommendMusicList:[],recommendNewSong:[],recommendDjProgram:[],songListDesc:[]}},created:function(){this._getBanner(),this._getMusicList(),this._getNewSong(),this._getDjProgram(),v.f().then(function(t){})},computed:n()({},Object(m.c)(["currentRefreshTime"])),methods:{handlePlaylist:function(t){var s=t.length>0?"60px":"";this.$refs.recommend.style.bottom=s,this.$refs.scroll.refresh()},showRank:function(){this.$router.push({name:"Ranks",params:{title:"排行榜"}})},showAllSongLists:function(){this.$router.push({name:"AllSongLists",params:{title:"歌单"}})},showSongList:function(t){this.$router.push({name:"MusicList",params:{title:"歌单"},query:{id:t.id}})},showNewSong:function(t){console.log(t),this.$router.push({name:"NewSong",params:{title:"专辑"},query:{id:t.id}})},showAllNewSong:function(){console.log("showAllNewSong")},showAllBroadcast:function(){this.$router.push({name:"Broadcast"})},listenCount:function(t){return t>Math.pow(10,8)?(t/Math.pow(10,8)).toFixed(2).slice(0,-1)+"亿":t>1e5?(t/Math.pow(10,4)).toFixed(2).slice(0,-1)+"万":""+parseInt(t)},_getBanner:function(){var t=this;v.a().then(function(s){s.data.code===p.a&&(t.banners=s.data.banners)})},_getMusicList:function(){var t=this;v.e().then(function(s){t.recommendMusicLists=s,t.recommendMusicList=s.slice(0,6)})},_getNewSong:function(){var t=this;v.g().then(function(s){s.data.code===p.a&&s.data.result.slice(0,6).forEach(function(s){t.recommendNewSong.push(s.song)})})},_getDjProgram:function(){var t=this;v.c().then(function(s){s.data.code===p.a&&(t.recommendDjProgram=s.data.result)})}},components:{Slider:l,Scroll:d.a,Loading:u.a}},g={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"recommend",staticClass:"recommend"},[i("scroll",{ref:"scroll",staticClass:"recommend-wrapper",attrs:{data:t.recommendMusicLists}},[i("div",[i("div",{staticClass:"sliders"},[t.banners.length>0?i("div",{staticClass:"slider-wrapper"},[i("slider",t._l(t.banners,function(t,s){return i("div",{key:s},[i("a",{attrs:{href:t.url}},[i("img",{staticClass:"needsclick",attrs:{src:t.picUrl}})])])}))],1):t._e()]),t._v(" "),i("div",{staticClass:"tabs"},[i("div",{staticClass:"tab"},[i("div",{staticClass:"icon-wrapper"},[i("i",{staticClass:"icon iconfont music-broadcast"})]),t._v(" "),i("p",{staticClass:"description"},[t._v("私人FM")])]),t._v(" "),i("div",{staticClass:"tab"},[i("div",{staticClass:"icon-wrapper"},[i("i",{staticClass:"icon iconfont music-calendar"}),t._v(" "),i("p",{staticClass:"date"},[t._v(t._s((new Date).getDate()))])]),t._v(" "),i("p",{staticClass:"description"},[t._v("每日推荐")])]),t._v(" "),i("div",{staticClass:"tab",on:{click:t.showAllSongLists}},[i("div",{staticClass:"icon-wrapper"},[i("i",{staticClass:"icon iconfont music-songs"})]),t._v(" "),i("p",{staticClass:"description"},[t._v("歌单")])]),t._v(" "),i("div",{staticClass:"tab",on:{click:t.showRank}},[i("div",{staticClass:"icon-wrapper"},[i("i",{staticClass:"icon iconfont music-rank"})]),t._v(" "),i("p",{staticClass:"description"},[t._v("排行榜")])])]),t._v(" "),i("div",{staticClass:"recommend-music-list common"},[i("div",{staticClass:"title",on:{click:t.showAllSongLists}},[t._v("推荐歌单"),i("i",{staticClass:"icon iconfont music-arrow-right"})]),t._v(" "),i("div",{staticClass:"list-content common-content"},[i("ul",t._l(t.recommendMusicList,function(s,e){return i("li",{key:e,on:{click:function(i){t.showSongList(s)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.picUrl,expression:"item.picUrl"}]}),t._v(" "),i("div",{staticClass:"list-play-count"},[i("i",{staticClass:"icon iconfont music-volume"}),t._v(" "),i("span",[t._v(t._s(t.listenCount(s.playCount)))])]),t._v(" "),i("p",{staticClass:"name"},[t._v(t._s(s.name))])])}))])]),t._v(" "),i("div",{staticClass:"recommend-new-music common"},[i("div",{staticClass:"title",on:{click:t.showAllNewSong}},[t._v("最新音乐"),i("i",{staticClass:"icon iconfont music-arrow-right"})]),t._v(" "),i("div",{staticClass:"new-song-content common-content"},[i("ul",t._l(t.recommendNewSong,function(s,e){return i("li",{key:e,on:{click:function(i){t.showNewSong(s)}}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.album.picUrl,expression:"song.album.picUrl"}]}),t._v(" "),i("p",{staticClass:"name"},[t._v(t._s(s.name))])])}))])]),t._v(" "),i("div",{staticClass:"recommend-dj-program common"},[i("router-link",{attrs:{to:"/index/broadcast"}},[i("div",{staticClass:"title",on:{click:t.showAllBroadcast}},[t._v("主播电台"),i("i",{staticClass:"icon iconfont music-arrow-right"})])]),t._v(" "),i("div",{staticClass:"dj-program-content common-content"},[i("ul",t._l(t.recommendDjProgram,function(s,e){return i("li",{key:e},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.picUrl,expression:"item.picUrl"}]}),t._v(" "),i("p",{staticClass:"name"},[t._v(t._s(s.name))])])}))])],1)])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.recommendMusicLists.length,expression:"!recommendMusicLists.length"}],staticClass:"loading-container"},[i("loading")],1),t._v(" "),i("router-view")],1)},staticRenderFns:[]};var _=i("VU/8")(f,g,!1,function(t){i("8JGL")},"data-v-501c33bc",null);s.default=_.exports}});
//# sourceMappingURL=4.d7ae9d9120369849d91f.js.map